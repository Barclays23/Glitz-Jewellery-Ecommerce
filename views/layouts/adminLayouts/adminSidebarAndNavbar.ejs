<body>
   <div class="container-scroller">
      <!-- partial:partials/_sidebar.html -->
      <nav class="sidebar sidebar-offcanvas" id="sidebar">
         <div class="sidebar-brand-wrapper d-none d-lg-flex align-items-center justify-content-center fixed-top">
            <a class="sidebar-brand brand-logo" href="/admin"><img
               src="/assets/images/logos/Glitz_Logo_Transformed-3.png" alt="logo" /> </a>
               <!-- src="https://demo.bootstrapdash.com/corona-new/themes/assets/images/logo.svg" alt="logo" /></a> -->
            <a class="sidebar-brand brand-logo-mini" href="/admin"><img
               src="/assets/images/logos/Glitz-Logo7.png" alt="logo" /> </a>
               <!-- src="https://demo.bootstrapdash.com/corona-new/themes/assets/images/logo-mini.svg" alt="logo" /></a> -->
         </div>
         <ul class="nav">
            <li class="nav-item profile">
               <div class="profile-desc">
                  <div class="profile-pic">
                     <div class="count-indicator">
                        <img class="img-xs rounded-circle " src="../assets/images/faces/face15.jpg" alt="">
                        <span class="count bg-success"></span>
                     </div>
                     <div class="profile-name">
                        <h5 class="mb-0 font-weight-normal text-success">
                           <%= adminData.firstname %> <%= adminData.lastname %>
                        </h5>
                        <span>
                           <%= adminData.email %>
                        </span>
                     </div>
                  </div>
                  <a href="#" id="profile-dropdown" data-bs-toggle="dropdown"><i class="mdi mdi-dots-vertical"></i></a>
                  <div class="dropdown-menu dropdown-menu-right sidebar-dropdown preview-list"
                     aria-labelledby="profile-dropdown">
                     <a href="#" class="dropdown-item preview-item">
                        <div class="preview-thumbnail">
                           <div class="preview-icon bg-dark rounded-circle">
                              <i class="mdi mdi-cog text-primary"></i>
                           </div>
                        </div>
                        <div class="preview-item-content">
                           <p class="preview-subject ellipsis mb-1 text-small">Account settings</p>
                        </div>
                     </a>
                     <div class="dropdown-divider"></div>
                     <a href="#" class="dropdown-item preview-item">
                        <div class="preview-thumbnail">
                           <div class="preview-icon bg-dark rounded-circle">
                              <i class="mdi mdi-onepassword  text-info"></i>
                           </div>
                        </div>
                        <div class="preview-item-content">
                           <p class="preview-subject ellipsis mb-1 text-small">Change Password</p>
                        </div>
                     </a>
                     <div class="dropdown-divider"></div>
                     <a href="#" class="dropdown-item preview-item">
                        <div class="preview-thumbnail">
                           <div class="preview-icon bg-dark rounded-circle">
                              <i class="mdi mdi-calendar-today text-success"></i>
                           </div>
                        </div>
                        <div class="preview-item-content">
                           <p class="preview-subject ellipsis mb-1 text-small">To-do list</p>
                        </div>
                     </a>
                  </div>
               </div>
            </li>

            <!-- <li class="nav-item nav-category">
               <span class="nav-link">Navigation</span>
            </li> -->

            <li class="nav-item menu-items">
               <a class="nav-link" href="/admin">
                  <span class="menu-icon">
                     <i class="mdi mdi-speedometer"></i>
                  </span>
                  <span class="menu-title">Dashboard</span>
               </a>
            </li>

 
            <!-- <li class="nav-item menu-items">
               <a class="nav-link" id="goldRateLink" href="#">
                  <span class="menu-icon">
                     <i class="mdi mdi-speedometer"></i>
                  </span>
                  <span class="menu-title">Gold Rate</span>
               </a>
            </li> -->
            
 
            <li class="nav-item menu-items">
               <a class="nav-link" data-bs-toggle="collapse" href="#gold-rate" aria-expanded="false" aria-controls="gold-rate">
                  <span class="menu-icon">
                     <i class="mdi mdi-lock"></i>
                  </span>
                  <span class="menu-title">Gold Rate</span>
                  <i class="menu-arrow"></i>
               </a>
               <div class="collapse" id="gold-rate">
                  <ul class="nav flex-column sub-menu">
                     <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#updateGoldRateModal" data-rate=""> Update Rate </a>
                     </li>
                  </ul>
               </div>
            </li>


 

            <li class="nav-item menu-items">
               <a class="nav-link" href="/admin/users">
                  <span class="menu-icon">
                     <i class="mdi mdi-account"></i>
                  </span>
                  <span class="menu-title">Users</span>
               </a>
            </li>

            <li class="nav-item menu-items">
               <a class="nav-link" href="/admin/categories">
                  <span class="menu-icon">
                     <i class="mdi mdi-microsoft"></i>
                  </span>
                  <span class="menu-title">Categories</span>
               </a>
            </li>

            <li class="nav-item menu-items">
               <a class="nav-link" href="/admin/products">
                  <span class="menu-icon">
                     <i class="mdi mdi-cube-outline"></i>
                  </span>
                  <span class="menu-title">Products</span>
               </a>
            </li>

            <li class="nav-item menu-items">
               <a class="nav-link" href="/admin/orders">
                  <span class="menu-icon">
                     <i class="mdi mdi-texture"></i>
                  </span>
                  <span class="menu-title">Orders</span>
               </a>
            </li>

            <li class="nav-item menu-items">
               <a class="nav-link" href="/admin/coupons">
                  <span class="menu-icon">
                     <i class="mdi mdi-texture"></i>
                  </span>
                  <span class="menu-title">Coupons</span>
               </a>
            </li>

         </ul>
      </nav>





      <!-- partial -->
      <div class="container-fluid page-body-wrapper">
         <!-- partial:partials/_navbar.html -->
         <nav class="navbar p-0 fixed-top d-flex flex-row">
            <div class="navbar-brand-wrapper d-flex d-lg-none align-items-center justify-content-center">
               <a class="navbar-brand brand-logo-mini" href="index-2.html"><img
                     src="https://demo.bootstrapdash.com/corona-new/themes/assets/images/logo-mini.svg"
                     alt="logo" /></a>
            </div>
            <div class="navbar-menu-wrapper flex-grow d-flex align-items-stretch">
               <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
                  <span class="mdi mdi-menu"></span>
               </button>
               <ul class="navbar-nav w-100">
                  <li class="nav-item w-100">
                     <form class="nav-link mt-2 mt-md-0 d-none d-lg-flex search" action="" method="">
                        <input type="text" class="form-control" placeholder="Search" name="search">
                        <input type="submit" class="search-inputs search-btn text-white bg-success p-1" value="Search">
                     </form>
                  </li>
               </ul>

               <ul class="navbar-nav navbar-nav-right">

                  <!-- <li class="nav-item dropdown d-none d-lg-block">
                     <a class="nav-link btn btn-success create-new-button" id="createbuttonDropdown"
                        data-bs-toggle="dropdown" aria-expanded="false" href="#">+ Create New Project</a>
                     <div class="dropdown-menu dropdown-menu-end navbar-dropdown preview-list"
                        aria-labelledby="createbuttonDropdown">
                        <h6 class="p-3 mb-0">Projects</h6>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item preview-item">
                           <div class="preview-thumbnail">
                              <div class="preview-icon bg-dark rounded-circle">
                                 <i class="mdi mdi-file-outline text-primary"></i>
                              </div>
                           </div>
                           <div class="preview-item-content">
                              <p class="preview-subject ellipsis mb-1">Software Development</p>
                           </div>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item preview-item">
                           <div class="preview-thumbnail">
                              <div class="preview-icon bg-dark rounded-circle">
                                 <i class="mdi mdi-web text-info"></i>
                              </div>
                           </div>
                           <div class="preview-item-content">
                              <p class="preview-subject ellipsis mb-1">UI Development</p>
                           </div>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item preview-item">
                           <div class="preview-thumbnail">
                              <div class="preview-icon bg-dark rounded-circle">
                                 <i class="mdi mdi-layers text-danger"></i>
                              </div>
                           </div>
                           <div class="preview-item-content">
                              <p class="preview-subject ellipsis mb-1">Software Testing</p>
                           </div>
                        </a>
                        <div class="dropdown-divider"></div>
                        <p class="p-3 mb-0 text-center">See all projects</p>
                     </div>
                  </li> -->

                  <style>
                     .nav-gold-rate {
                        /* font-weight: bold; */
                        border-radius: 1px;
                        border: solid 3px rgba(255, 255, 255, 0.619);
                        margin: 0;
                     }
                     .nav-gold-rate .gold-price{
                        color: gold;
                        font-weight: bold;
                        margin: 0;
                        border-radius: 5px;
                        transition: transform 0.2s;
                     }
                     .nav-gold-rate .price-label{
                        margin: 0;
                     }
                     .nav-gold-rate hr{
                        margin: 0;
                     }

             
                     .nav-gold-rate .gold-price:hover {
                        transform: scale(1.3);
                     }
                 </style>

                  <li class="nav-item nav-gold-rate d-none d-lg-block text-center">
                     <h3 class="nav-link text-white price-label"> GOLD RATE </h3>
                     <hr>
                     <h3 class="gold-price"> <%= goldPriceData.price %></h3>
                  </li>
                  <li class="nav-item nav-settings d-none d-lg-block">
                     <a class="nav-link" href="#">
                        <i class="mdi mdi-view-grid"></i>
                     </a>
                  </li>
                  <li class="nav-item dropdown border-left">
                     <a class="nav-link count-indicator dropdown-toggle" id="messageDropdown" href="#"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="mdi mdi-email"></i>
                        <span class="count bg-success"></span>
                     </a>
                     <div class="dropdown-menu dropdown-menu-end navbar-dropdown preview-list"
                        aria-labelledby="messageDropdown">
                        <h6 class="p-3 mb-0">Messages</h6>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item preview-item">
                           <div class="preview-thumbnail">
                              <img src="../assets/images/faces/face4.jpg" alt="image"
                                 class="rounded-circle profile-pic">
                           </div>
                           <div class="preview-item-content">
                              <p class="preview-subject ellipsis mb-1">Mark send you a message</p>
                              <p class="text-muted mb-0"> 1 Minutes ago </p>
                           </div>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item preview-item">
                           <div class="preview-thumbnail">
                              <img src="../assets/images/faces/face2.jpg" alt="image"
                                 class="rounded-circle profile-pic">
                           </div>
                           <div class="preview-item-content">
                              <p class="preview-subject ellipsis mb-1">Cregh send you a message</p>
                              <p class="text-muted mb-0"> 15 Minutes ago </p>
                           </div>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item preview-item">
                           <div class="preview-thumbnail">
                              <img src="../assets/images/faces/face3.jpg" alt="image"
                                 class="rounded-circle profile-pic">
                           </div>
                           <div class="preview-item-content">
                              <p class="preview-subject ellipsis mb-1">Profile picture updated</p>
                              <p class="text-muted mb-0"> 18 Minutes ago </p>
                           </div>
                        </a>
                        <div class="dropdown-divider"></div>
                        <p class="p-3 mb-0 text-center">4 new messages</p>
                     </div>
                  </li>
                  <li class="nav-item dropdown border-left">
                     <a class="nav-link count-indicator dropdown-toggle" id="notificationDropdown" href="#"
                        data-bs-toggle="dropdown">
                        <i class="mdi mdi-bell"></i>
                        <span class="count bg-danger"></span>
                     </a>
                     <div class="dropdown-menu dropdown-menu-end navbar-dropdown preview-list"
                        aria-labelledby="notificationDropdown">
                        <h6 class="p-3 mb-0">Notifications</h6>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item preview-item">
                           <div class="preview-thumbnail">
                              <div class="preview-icon bg-dark rounded-circle">
                                 <i class="mdi mdi-calendar text-success"></i>
                              </div>
                           </div>
                           <div class="preview-item-content">
                              <p class="preview-subject mb-1">Event today</p>
                              <p class="text-muted ellipsis mb-0"> Just a reminder that you have an event today </p>
                           </div>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item preview-item">
                           <div class="preview-thumbnail">
                              <div class="preview-icon bg-dark rounded-circle">
                                 <i class="mdi mdi-cog text-danger"></i>
                              </div>
                           </div>
                           <div class="preview-item-content">
                              <p class="preview-subject mb-1">Settings</p>
                              <p class="text-muted ellipsis mb-0"> Update dashboard </p>
                           </div>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item preview-item">
                           <div class="preview-thumbnail">
                              <div class="preview-icon bg-dark rounded-circle">
                                 <i class="mdi mdi-link-variant text-warning"></i>
                              </div>
                           </div>
                           <div class="preview-item-content">
                              <p class="preview-subject mb-1">Launch Admin</p>
                              <p class="text-muted ellipsis mb-0"> New admin wow! </p>
                           </div>
                        </a>
                        <div class="dropdown-divider"></div>
                        <p class="p-3 mb-0 text-center">See all notifications</p>
                     </div>
                  </li>
                  <li class="nav-item dropdown">
                     <a class="nav-link" id="profileDropdown" href="#" data-bs-toggle="dropdown">
                        <div class="navbar-profile">
                           <img class="img-xs rounded-circle" src="../assets/images/faces/face15.jpg" alt="">
                           <p class="mb-0 d-none d-sm-block navbar-profile-name text-success">
                              <%= adminData.firstname %> <%= adminData.lastname %>
                           </p>
                           <i class="mdi mdi-menu-down d-none d-sm-block"></i>
                        </div>
                     </a>
                     <div class="dropdown-menu dropdown-menu-end navbar-dropdown preview-list" aria-labelledby="profileDropdown">

                        <!-- <h6 class="p-3 mb-0">Profile</h6> -->

                        <a href="/admin/settings" class="dropdown-item preview-item">
                           <div class="preview-thumbnail">
                              <div class="preview-icon bg-dark rounded-circle">
                                 <i class="mdi mdi-account text-grey"></i>
                              </div>
                           </div>
                           <div class="preview-item-content">
                              <p class="preview-subject mb-1">Profile</p>
                           </div>
                        </a>

                        <div class="dropdown-divider"></div>

                        <a href="/admin/send-mail" class="dropdown-item preview-item">
                           <div class="preview-thumbnail">
                              <div class="preview-icon bg-dark rounded-circle">
                                 <i class="mdi mdi-mail text-primary"></i>
                              </div>
                           </div>
                           <div class="preview-item-content">
                              <p class="preview-subject mb-1">Send Mail</p>
                           </div>
                        </a>

                        <div class="dropdown-divider"></div>

                        <a href="/admin/settings" class="dropdown-item preview-item">
                           <div class="preview-thumbnail">
                              <div class="preview-icon bg-dark rounded-circle">
                                 <i class="mdi mdi-settings text-secondary"></i>
                              </div>
                           </div>
                           <div class="preview-item-content">
                              <p class="preview-subject mb-1">Settings</p>
                           </div>
                        </a>

                        <div class="dropdown-divider"></div>

                        <a href="/admin/logout" class="dropdown-item preview-item">
                           <div class="preview-thumbnail">
                              <div class="preview-icon bg-dark rounded-circle">
                                 <i class="mdi mdi-logout text-danger"></i>
                              </div>
                           </div>
                           <div class="preview-item-content">
                              <p class="preview-subject mb-1">Log out</p>
                           </div>
                        </a>

                        <div class="dropdown-divider"></div>
                        
                     </div>
                  </li>
               </ul>
               <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-toggle="offcanvas">
                  <span class="mdi mdi-format-line-spacing"></span>
               </button>
            </div>
         </nav>



         <div class="main-panel">
            <!--(inside main-panel) -1 - content-wrapper -->
            <!--(inside main-panel) -2 - footer -->
            <!-- then scripts -->




<!-- =================================================== -->

<!-- Update Gold Rate Modal Starts -->
<div class="modal fade" id="updateGoldRateModal" tabindex="-1" aria-labelledby="updateGoldRateModalLabel" aria-hidden="true">
   <div class="modal-dialog" role="document">
       <div class="modal-content">
           <div class="modal-header">
               <h5 class="modal-title" id="updateGoldRateModalLabel">UPDATE GOLD RATE</h5>
               <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
           </div>
           <div class="modal-body">
               <!-- Form for updating gold rate -->
               <form id="update-gold-rate-form">
                   <div class="form-group">
                       <label for="update-gold-rate">Gold Rate:</label>
                       <input type="text" class="form-control" id="update-gold-rate" name="update-gold-rate" required>
                       <span id="update-gold-rate-error" style="color: orangered; display: none"></span>
                   </div>
               </form>
           </div>
           <div class="modal-footer">
               <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
               <button type="button" class="btn btn-primary" id="saveGoldRateBtn">Save</button>
           </div>
       </div>
   </div>
</div>
<!-- Update Gold Rate Modal Ends -->



<!-- Script for updating the gold rate -->
<script>
   $(document).ready(function () {
      $('a[data-bs-target="#updateGoldRateModal"]').click(function () {
         // You can add any initialization logic here if needed
      });

      // Event listener for saving the gold rate
      $('#saveGoldRateBtn').click(function () {
         // Retrieve the updated gold rate from the modal field
         const goldRate = $('#update-gold-rate').val();
         console.log('goldRate is : ', goldRate);

         const updateGoldRateError = document.getElementById('update-gold-rate-error');

         let isValid = true;

         if (goldRate === "") {
            updateGoldRateError.textContent = "Gold rate is required.";
            updateGoldRateError.style.display = "block";
            isValid = false;
         } else if (!/^\d+(\.\d+)?$/.test(goldRate)) {
            updateGoldRateError.textContent = "Enter a valid Gold rate (numbers only).";
            updateGoldRateError.style.display = "block";
            isValid = false;
         } else {
            updateGoldRateError.style.display = "none";
         }

         if (!isValid) {
            return;
         }

         $.ajax({
            url: '/admin/update-gold-rate',
            method: 'PUT',
            contentType: 'application/json',
            data: JSON.stringify({
               goldRate
            }),
            success: function (response) {
               console.log('Update Gold Rate Form submitted');
               if (response.success) {
                  Swal.fire({
                     icon: "success",
                     title: "Success",
                     text: "Gold Rate Updated Successfully!",

                  })
                  .then(location.reload())
                  
               } else if (response.exists) {
                  updateGoldRateError.textContent = response.message;
                  updateGoldRateError.style.display = "block";
               } else {
                  console.error('Update Gold Rate Failed:', response.message);
               }
            },
            error: function (xhr, status, error) {
               console.error('Error in updating gold rate:', error);
            }
         });
      });
   });
</script>
<!-- for TWO ends -->